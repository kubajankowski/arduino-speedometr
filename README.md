# Arduino Speedometer / Prędkościomierz Arduino

 ______ _____          _____            _____ ______ 
|  ____/ ____|   /\   |  __ \     /\   / ____|  ____|
| |__ | |  __   /  \  | |__) |   /  \ | |  __| |__   
|  __|| | |_ | / /\ \ |  _  /   / /\ \| | |_ |  __|  
| |   | |__| |/ ____ \| | \ \  / ____ \ |__| | |____ 
|_|    \_____/_/    \_\_|  \_\/_/    \_\_____|______|

## English Description

A complete Arduino-based speedometer system that measures vehicle speed using pulse signals from wheel sensors. This enhanced version includes additional features like maximum speed tracking, distance measurement, and average speed calculation.

### Features
- **Real-time speed measurement** in km/h
- **Maximum speed tracking** - records the highest speed reached
- **Distance/Odometer functionality** - tracks total distance traveled
- **Average speed calculation** - computes average speed over time
- **Error handling** - detects and filters out noise/invalid readings
- **Configurable parameters** - easy to adjust for different wheel sizes and sensors
- **Detailed serial output** - comprehensive information display

### How It Works
1. **Square wave signal** is generated by a sensor (Hall sensor, encoder, or pulse generator)
2. The Arduino counts pulses over a specific time period (1 second by default)
3. Using the number of pulses per revolution and wheel circumference, linear speed is calculated
4. Additional statistics are computed and displayed

### Hardware Requirements
- Arduino board (Uno, Nano, etc.)
- Hall sensor, encoder, or other pulse-generating sensor
- Connection wire to digital pin 2 (interrupt-capable pin)
- Pull-up resistor (if not using INPUT_PULLUP)

### Wiring
```
Sensor Signal → Arduino Pin 2 (Digital, with interrupt capability)
Sensor VCC    → Arduino 5V or 3.3V
Sensor GND    → Arduino GND
```

### Configuration
Adjust these constants in the code for your specific setup:

```cpp
const float wheelCircumference = 1.922; // Wheel circumference in meters
const int pulsesPerRevolution = 48;     // Pulses per wheel revolution
const unsigned long measurementInterval = 1000; // Measurement interval (ms)
```

### Calculating Wheel Circumference
For accurate speed measurement, calculate your wheel circumference:
- **Method 1**: π × wheel diameter (in meters)
- **Method 2**: 2 × π × (rim radius + tire height)
- **Method 3**: Physical measurement - mark tire and measure one complete rotation

### Serial Output Example
```
Arduino Speedometer Initialized
Wheel circumference: 1.922 m
Pulses per revolution: 48
======================================
Speed: 45.2 km/h | Max: 67.8 km/h | Distance: 12.345 km | Avg: 42.1 km/h | Uptime: 1200s
```

---

## Opis Polski

Kompletny system prędkościomierza oparty na Arduino, który mierzy prędkość pojazdu za pomocą sygnałów impulsowych z czujników kół. Ta ulepszona wersja zawiera dodatkowe funkcje, takie jak śledzenie maksymalnej prędkości, pomiar odległości i obliczanie średniej prędkości.

### Zasada działania

1. **Sygnał kwadratowy** to ciąg impulsów (np. z czujnika Halla, enkodera lub impulsatora).
2. Zliczamy ilość impulsów w określonym czasie (np. przez 1 sekundę).
3. Znając liczbę impulsów na jeden obrót oraz obwód koła, możemy wyznaczyć prędkość liniową.

### Nowe funkcje
- **Pomiar prędkości w czasie rzeczywistym** w km/h
- **Śledzenie maksymalnej prędkości** - rejestruje najwyższą osiągniętą prędkość
- **Funkcja licznika kilometrów** - śledzi całkowitą przebytą odległość
- **Obliczanie średniej prędkości** - wylicza średnią prędkość w czasie
- **Obsługa błędów** - wykrywa i filtruje szumy/nieprawidłowe odczyty
- **Konfigurowalne parametry** - łatwe dostosowanie do różnych rozmiarów kół i czujników

### Wyjaśnienie obliczeń

- Funkcja **countPulse** zwiększa licznik za każdym razem, gdy pojawi się impuls.
- W pętli głównej co sekundę liczone są obroty i prędkość.
- Prędkość liczona jest jako:  
  `prędkość (km/h) = liczba obrotów w sekundzie * obwód koła (m) * 3.6`

### Dostosowanie kodu

- Jeśli czujnik daje więcej impulsów na obrót (np. 20 impulsów/obrót), zmień `pulsesPerRevolution` na odpowiednią wartość.
- Ustaw `wheelCircumference` zgodnie z rzeczywistą długością obwodu koła.
- Dostosuj `measurementInterval` dla szybszych lub wolniejszych pomiarów.

### Przykład konfiguracji dla różnych pojazdów

```cpp
// Samochód osobowy - 17" felgi, opony 225/40R17
const float wheelCircumference = 1.922;
const int pulsesPerRevolution = 48;

// Rower - koło 26"
const float wheelCircumference = 2.07;
const int pulsesPerRevolution = 1; // magnes na szprysze

// Motocykl - 17" koło, opona 120/70R17
const float wheelCircumference = 1.87;
const int pulsesPerRevolution = 24;
```

### Troubleshooting / Rozwiązywanie problemów

**Problem**: Brak odczytów prędkości
- Sprawdź połączenia kabli
- Upewnij się, że czujnik generuje sygnał
- Sprawdź czy pin 2 obsługuje przerwania

**Problem**: Nierealistyczne odczyty prędkości
- Sprawdź konfigurację `wheelCircumference`
- Sprawdź `pulsesPerRevolution`
- Możliwe zakłócenia - sprawdź ekranowanie kabli

**Problem**: "Warning: Pulse rate too high"
- Prawdopodobnie zakłócenia na linii sygnałowej
- Dodaj filtr RC lub sprawdź uziemienie